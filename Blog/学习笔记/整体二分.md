# 整体二分 #
## 0x00 简介 ##
- 首先你得明白二分答案
- 二分答案通过一个check函数的单调性，把一个最优化问题转化为了一个检验性问题
- 整体二分即把很多最优化问题转化为很多检验性问题，并同时解决它们

## 0x01 例题 ##
- 一道经典的题，静态区间第k小
- 如果只有一个询问，我们可以考虑这样一种做法
- 在询问的区间里二分答案，如果比二分出的答案小的数超过了k个，说明二分出的答案太大了，反之则说明二分的答案太小了，这样我们就可以在log的时间内解决问题
- 但是对于很多个询问，我们怎么办呢？
- 我们可以考虑把他们一起二分
- 用树状数组统计一个区间内小于二分的答案的数的个数
- 然后好像并没有什么用，对于一个k很大的询问，复杂度会退化成nlogn^2，因为他最坏情况下要被二分logn次，每次统计需要nlogn，对于所有的询问，最坏情况下总共需要统计n^2logn^2次
- 但我们可以发现一个性质，如果一个二分的答案对于一个询问来说太小了，那么比这个答案小的数对于询问的贡献是固定的（即，原来比这个答案小的数，二分的答案变大，这些数还是比答案小）
- 我们能不能不统计这些比答案小的数呢？

## 0x02 思路 ##
- 我们每次二分把询问分成两块，一块认为二分的答案太大了，另一块认为二分的答案太小了
- 如果二分的答案太小了，显然比答案小的部分贡献是固定不变的，我们可以直接在认为答案太小的块中减去所有询问所得出的答案k，然后丢到右边半块。所有认为二分的答案太大的块丢到左边一半。
- 最后很重要的，把原数组里的数也按照比二分的答案大和小丢进左右两半（我们不对右半边统计左半边的数，也不对左半边统计右半边的数）
- 这样二分下去，每个数被二分logn次，被查询logn次，总复杂度是nlogn^2
- 具体实现可以像cdq分治那样写，具体可以看我的实现